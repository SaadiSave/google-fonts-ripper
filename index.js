function C(...o){for(let e of o)if(e==null)throw new TypeError("Cannot be null or undefined")}var x=new Headers({Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","User-Agent":"AppleWebKit/537.36 (KHTML, like Gecko) Chrome/48.0.2564.116"}),g=class{constructor(e,i,t,r,c){this.family=e,this.url=i,this.italic=t,this.weight=r,this.script=c}get fileName(){return`${this.family.replace(/ /g,"")}${this.italic?"Italic":""}${this.weight}${this.script}.woff2`}async fetchFont(){return(await fetch(new URL(this.url),{headers:x})).blob()}},p=g;p.fromCssDecl=e=>{var h,d,w,b,y;let i=/\/\*\s([^\s]*)\s\*\//g,t=/src:\s*url\(([^\(]*)\)/g,r=/font-family:\s*'(.*)'/g,c=/font-style:\s*(\w+)/g,f=/font-weight:\s*(\d+)/g,l=(h=i.exec(e))==null?void 0:h.pop(),s=(d=t.exec(e))==null?void 0:d.pop(),m=(w=r.exec(e))==null?void 0:w.pop(),u=(b=c.exec(e))==null?void 0:b.pop(),n=(y=f.exec(e))==null?void 0:y.pop();return C(m,u,n,s,l),new g(m,s,u==="italic",parseInt(n),l)};async function R(o){return await(await fetch(o,{headers:x})).text()}import E from"https://esm.sh/jszip@3.10.1";function L(o,e){let i=URL.createObjectURL(o),t=document.createElement("a");t.href=i,t.download=e,document.body.appendChild(t),t.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(t)}async function U(){let o=document.getElementById("req"),e=new URL(o.value),i=await R(o.value.replace(e.origin,"https://fonts.googleapis.com")),t=/(\/\*.*\*\/\s@font-face {[^}]*})/g,r=[];for(let n of i.matchAll(t))r.push(p.fromCssDecl(n.pop()));let c=r.reduce((n,a)=>n.replace(a.url,`./${a.fileName}`),i),f=r.map(n=>({fileName:n.fileName,blob:n.fetchFont()})),l=new E,s=l.folder("fonts");s==null||s.file("fonts.css",c);let m=f.map(async({fileName:n,blob:a})=>{s==null||s.file(n,await a)});await Promise.all(m);let u=await l.generateAsync({type:"blob"});L(u,"fonts.zip")}var v=document.getElementById("download");v.onclick=U;
