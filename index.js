var E=Object.defineProperty;var L=(t,e,n)=>e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var r=(t,e,n)=>L(t,typeof e!="symbol"?e+"":e,n);function v(...t){for(let e of t)if(e==null)throw new TypeError("Cannot be null or undefined")}var R=new Headers({Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","User-Agent":"AppleWebKit/537.36 (KHTML, like Gecko) Chrome/48.0.2564.116"}),d=class d{constructor(e,n,s,c,a){r(this,"family");r(this,"url");r(this,"italic");r(this,"weight");r(this,"script");this.family=e,this.url=n,this.italic=s,this.weight=c,this.script=a}get fileName(){return`${this.family.replace(/ /g,"")}${this.italic?"Italic":""}${this.weight}${this.script}.woff2`}async fetchFont(){return(typeof window<"u"?await fetch(this.url):await fetch(this.url,{headers:R})).blob()}};r(d,"fromCssDecl",e=>{var h,w,y,b,x;let n=/\/\*\s([^\s]*)\s\*\//g,s=/src:\s*url\(([^\(]*)\)/g,c=/font-family:\s*'(.*)'/g,a=/font-style:\s*(\w+)/g,g=/font-weight:\s*(\d+)/g,l=(h=n.exec(e))==null?void 0:h.pop(),i=(w=s.exec(e))==null?void 0:w.pop(),f=(y=c.exec(e))==null?void 0:y.pop(),u=(b=a.exec(e))==null?void 0:b.pop(),o=(x=g.exec(e))==null?void 0:x.pop();return v(f,u,o,i,l),new d(f,i,u==="italic",parseInt(o),l)});var m=d;async function C(t){return await(typeof window<"u"?await fetch(t):await fetch(t,{headers:R})).text()}import N from"https://esm.sh/jszip@3.10.1";function U(t,e){let n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=e,document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(s)}async function k(){let t=document.getElementById("req"),e=new URL(t.value),n=await C(t.value.replace(e.origin,"https://fonts.googleapis.com")),s=/(\/\*.*\*\/\s@font-face {[^}]*})/g,c=[];for(let o of n.matchAll(s))c.push(m.fromCssDecl(o.pop()));let a=c.reduce((o,p)=>o.replace(p.url,`./${p.fileName}`),n),g=c.map(o=>({fileName:o.fileName,blob:o.fetchFont()})),l=new N,i=l.folder("fonts");i==null||i.file("fonts.css",a);let f=g.map(async({fileName:o,blob:p})=>{i==null||i.file(o,await p)});await Promise.all(f);let u=await l.generateAsync({type:"blob"});U(u,"fonts.zip")}var q=document.getElementById("download");q.onclick=k;
